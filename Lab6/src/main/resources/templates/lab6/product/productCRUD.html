<!doctype html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Product Management</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 30px; }
        form { margin-bottom: 25px; background: #fafafa; padding: 15px; border-radius: 8px; width: fit-content; }
        label { display: inline-block; width: 120px; }
        input, select { margin-bottom: 10px; width: 200px; padding: 4px; }
        table { width: 100%; border-collapse: collapse; margin-top: 15px; }
        th, td { border: 1px solid #ccc; padding: 8px; text-align: center; }
        th { background-color: #f2f2f2; }
        img { width: 70px; height: auto; border-radius: 4px; }
        button, a { margin-right: 5px; }
    </style>
</head>
<body>

<h2>PRODUCT MANAGEMENT</h2>

<!-- FORM CRUD -->
<form th:object="${item}">
    <div>
        <label>ID:</label>
        <input th:field="*{id}" readonly placeholder="Auto generated" />
    </div>
    <div>
        <label>Name:</label>
        <input th:field="*{name}" placeholder="Enter product name" />
    </div>
    <div>
        <label>Price:</label>
        <input th:field="*{price}" type="number" step="0.01" placeholder="Enter price" />
    </div>
    <div>
        <label>Image URL:</label>
        <input th:field="*{image}" placeholder="Enter image URL" />
    </div>
    <div>
        <label>Available:</label>
        <input type="checkbox" th:field="*{available}" /> In stock
    </div>
    <div>
        <label>Category:</label>
        <select th:field="*{category}" required>
            <option value="" disabled selected>-- Select category --</option>
            <option th:each="c : ${categories}" th:value="${c.id}" th:text="${c.name}"></option>
        </select>
    </div>
    <div>
        <label>Create Date:</label>
        <input th:field="*{createDate}" type="date" />
    </div>

    <!-- Nút thao tác -->
    <div style="margin-top:10px;">
        <button formaction="/product/create" formmethod="post">Create</button>
        <button formaction="/product/update" formmethod="post">Update</button>
        <a th:href="@{/product/index}">Reset</a>
    </div>
</form>

<hr>

<!-- BẢNG DANH SÁCH SẢN PHẨM -->
<table>
    <thead>
    <tr>
        <th>ID</th>
        <th>Name</th>
        <th>Price</th>
        <th>Image</th>
        <th>Available</th>
        <th>Create Date</th>
        <th>Category</th>
        <th>Action</th>
    </tr>
    </thead>
    <tbody>
    <th:block th:each="p : ${items}">
        <tr>
            <td th:text="${p.id}"></td>
            <td th:text="${p.name}"></td>
            <td th:text="${p.price}"></td>
            <td>
                <img th:src="@{${p.image}}" alt="No image" />
            </td>
            <td th:text="${p.available} ? 'Yes' : 'No'"></td>
            <td th:text="${#dates.format(p.createDate, 'yyyy-MM-dd')}"></td>
            <td th:text="${p.category.name}"></td>
            <td>
                <a th:href="@{|/product/edit/${p.id}|}">Edit</a> |
                <a th:href="@{|/product/delete/${p.id}|}">Delete</a>
            </td>
        </tr>
    </th:block>
    </tbody>
</table>

</body>
</html>
